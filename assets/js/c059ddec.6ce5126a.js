"use strict";(self.webpackChunk_orca_so_whirlpools_docs=self.webpackChunk_orca_so_whirlpools_docs||[]).push([[4756],{1184:(e,s,a)=>{a.d(s,{R:()=>r,x:()=>i});var t=a(4041);const l={},n=t.createContext(l);function r(e){const s=t.useContext(n);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),t.createElement(n.Provider,{value:s},e.children)}},5151:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"Architecture Overview/Whirlpool Fees","title":"Understanding Whirlpool Fees","description":"When a user performs a swap on a Whirlpool, a percentage of the swap input amount may be taken as a fee, allocated between liquidity providers and a protocol fee.","source":"@site/docs/02-Architecture Overview/05-Whirlpool Fees.md","sourceDirName":"02-Architecture Overview","slug":"/Architecture Overview/Whirlpool Fees","permalink":"/Architecture Overview/Whirlpool Fees","draft":false,"unlisted":false,"editUrl":"https://github.com/orca-so/whirlpools/tree/main/docs/whirlpool/docs/02-Architecture Overview/05-Whirlpool Fees.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"sidebar","previous":{"title":"Tokenized Positions","permalink":"/Architecture Overview/Tokenized Positions"},"next":{"title":"Whirlpools Parameters","permalink":"/Architecture Overview/Whirlpool Parameters"}}');var l=a(1085),n=a(1184);const r={},i="Understanding Whirlpool Fees",c={},o=[{value:"Total Fee",id:"total-fee",level:2},{value:"Fee Breakdown",id:"fee-breakdown",level:2},{value:"ProtocolFee",id:"protocolfee",level:3},{value:"Liquidity Provider Fee",id:"liquidity-provider-fee",level:3}];function m(e){const s={a:"a",annotation:"annotation",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",math:"math",mfrac:"mfrac",mn:"mn",mo:"mo",mrow:"mrow",mtext:"mtext",p:"p",semantics:"semantics",span:"span",...(0,n.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"understanding-whirlpool-fees",children:"Understanding Whirlpool Fees"})}),"\n",(0,l.jsx)(s.p,{children:"When a user performs a swap on a Whirlpool, a percentage of the swap input amount may be taken as a fee, allocated between liquidity providers and a protocol fee."}),"\n",(0,l.jsx)(s.h2,{id:"total-fee",children:"Total Fee"}),"\n",(0,l.jsxs)(s.p,{children:["On the protocol, the total fee collected from the user is referred as the fee-rate. It is stored as a hundredths of a basis point on the ",(0,l.jsx)(s.a,{href:"https://github.com/orca-so/whirlpools/blob/2c9366a74edc9fefd10caa3de28ba8a06d03fc1e/programs/whirlpool/src/state/whirlpool.rs",children:"Whirlpool"})," account."]}),"\n",(0,l.jsx)(s.p,{children:"A 0.01% (1bps) swap fee would equate to a fee_rate value of 100."}),"\n",(0,l.jsx)(s.span,{className:"katex-display",children:(0,l.jsxs)(s.span,{className:"katex",children:[(0,l.jsx)(s.span,{className:"katex-mathml",children:(0,l.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,l.jsxs)(s.semantics,{children:[(0,l.jsxs)(s.mrow,{children:[(0,l.jsx)(s.mtext,{children:"swap_fee"}),(0,l.jsx)(s.mo,{children:"="}),(0,l.jsxs)(s.mfrac,{children:[(0,l.jsxs)(s.mrow,{children:[(0,l.jsx)(s.mtext,{children:"input_amount"}),(0,l.jsx)(s.mo,{children:"\xd7"}),(0,l.jsx)(s.mtext,{children:"fee_rate"})]}),(0,l.jsx)(s.mn,{children:"1000000"})]})]}),(0,l.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\text{swap\\_fee} = \\frac{\\text{input\\_amount} \\times \\text{fee\\_rate}}{1000000}"})]})})}),(0,l.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"1.0044em",verticalAlign:"-0.31em"}}),(0,l.jsx)(s.span,{className:"mord text",children:(0,l.jsx)(s.span,{className:"mord",children:"swap_fee"})}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(s.span,{className:"mrel",children:"="}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"2.0804em",verticalAlign:"-0.686em"}}),(0,l.jsxs)(s.span,{className:"mord",children:[(0,l.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,l.jsx)(s.span,{className:"mfrac",children:(0,l.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(s.span,{className:"vlist-r",children:[(0,l.jsxs)(s.span,{className:"vlist",style:{height:"1.3944em"},children:[(0,l.jsxs)(s.span,{style:{top:"-2.314em"},children:[(0,l.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(s.span,{className:"mord",children:(0,l.jsx)(s.span,{className:"mord",children:"1000000"})})]}),(0,l.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,l.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,l.jsxs)(s.span,{style:{top:"-3.7em"},children:[(0,l.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsxs)(s.span,{className:"mord",children:[(0,l.jsx)(s.span,{className:"mord text",children:(0,l.jsx)(s.span,{className:"mord",children:"input_amount"})}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(s.span,{className:"mord text",children:(0,l.jsx)(s.span,{className:"mord",children:"fee_rate"})})]})]})]}),(0,l.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(s.span,{className:"vlist-r",children:(0,l.jsx)(s.span,{className:"vlist",style:{height:"0.686em"},children:(0,l.jsx)(s.span,{})})})]})}),(0,l.jsx)(s.span,{className:"mclose nulldelimiter"})]})]})]})]})}),"\n",(0,l.jsx)(s.h2,{id:"fee-breakdown",children:"Fee Breakdown"}),"\n",(0,l.jsx)(s.h3,{id:"protocolfee",children:"ProtocolFee"}),"\n",(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"protocol_fee"})," is the fee diverted to a wallet that only the WhirlpoolConfig's ",(0,l.jsx)(s.code,{children:"collectProtocolFeesAuthority"})," can collect. Often, this is used as the treasury of the protocol hosting the Whirlpools program."]}),"\n",(0,l.jsx)(s.p,{children:"It is stored as a basis point of the total fees collected on the Whirlpool account. For example, 3% of the total swap fee is diverted to the protocol would have a protocol_fee value of 300."}),"\n",(0,l.jsx)(s.span,{className:"katex-display",children:(0,l.jsxs)(s.span,{className:"katex",children:[(0,l.jsx)(s.span,{className:"katex-mathml",children:(0,l.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,l.jsxs)(s.semantics,{children:[(0,l.jsxs)(s.mrow,{children:[(0,l.jsx)(s.mtext,{children:"protocol_fee"}),(0,l.jsx)(s.mo,{children:"="}),(0,l.jsxs)(s.mfrac,{children:[(0,l.jsxs)(s.mrow,{children:[(0,l.jsx)(s.mtext,{children:"swap_fee"}),(0,l.jsx)(s.mo,{children:"\xd7"}),(0,l.jsx)(s.mtext,{children:"protocol_fee_rate"})]}),(0,l.jsx)(s.mn,{children:"10000"})]})]}),(0,l.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\text{protocol\\_fee} = \\frac{\\text{swap\\_fee} \\times \\text{protocol\\_fee\\_rate}}{10000}"})]})})}),(0,l.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"1.0044em",verticalAlign:"-0.31em"}}),(0,l.jsx)(s.span,{className:"mord text",children:(0,l.jsx)(s.span,{className:"mord",children:"protocol_fee"})}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(s.span,{className:"mrel",children:"="}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"2.0804em",verticalAlign:"-0.686em"}}),(0,l.jsxs)(s.span,{className:"mord",children:[(0,l.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,l.jsx)(s.span,{className:"mfrac",children:(0,l.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,l.jsxs)(s.span,{className:"vlist-r",children:[(0,l.jsxs)(s.span,{className:"vlist",style:{height:"1.3944em"},children:[(0,l.jsxs)(s.span,{style:{top:"-2.314em"},children:[(0,l.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(s.span,{className:"mord",children:(0,l.jsx)(s.span,{className:"mord",children:"10000"})})]}),(0,l.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,l.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,l.jsxs)(s.span,{style:{top:"-3.7em"},children:[(0,l.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,l.jsxs)(s.span,{className:"mord",children:[(0,l.jsx)(s.span,{className:"mord text",children:(0,l.jsx)(s.span,{className:"mord",children:"swap_fee"})}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(s.span,{className:"mord text",children:(0,l.jsx)(s.span,{className:"mord",children:"protocol_fee_rate"})})]})]})]}),(0,l.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,l.jsx)(s.span,{className:"vlist-r",children:(0,l.jsx)(s.span,{className:"vlist",style:{height:"0.686em"},children:(0,l.jsx)(s.span,{})})})]})}),(0,l.jsx)(s.span,{className:"mclose nulldelimiter"})]})]})]})]})}),"\n",(0,l.jsx)(s.h3,{id:"liquidity-provider-fee",children:"Liquidity Provider Fee"}),"\n",(0,l.jsx)(s.p,{children:"The liquidity providers get all of the remaining fees once the protocol fee is subtracted."}),"\n",(0,l.jsx)(s.span,{className:"katex-display",children:(0,l.jsxs)(s.span,{className:"katex",children:[(0,l.jsx)(s.span,{className:"katex-mathml",children:(0,l.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,l.jsxs)(s.semantics,{children:[(0,l.jsxs)(s.mrow,{children:[(0,l.jsx)(s.mtext,{children:"LP_fee"}),(0,l.jsx)(s.mo,{children:"="}),(0,l.jsx)(s.mtext,{children:"swap_fee"}),(0,l.jsx)(s.mo,{children:"\u2212"}),(0,l.jsx)(s.mtext,{children:"protocol_fee"})]}),(0,l.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\text{LP\\_fee} = \\text{swap\\_fee} - \\text{protocol\\_fee}"})]})})}),(0,l.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"1.0044em",verticalAlign:"-0.31em"}}),(0,l.jsx)(s.span,{className:"mord text",children:(0,l.jsx)(s.span,{className:"mord",children:"LP_fee"})}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(s.span,{className:"mrel",children:"="}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"1.0044em",verticalAlign:"-0.31em"}}),(0,l.jsx)(s.span,{className:"mord text",children:(0,l.jsx)(s.span,{className:"mord",children:"swap_fee"})}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(s.span,{className:"mbin",children:"\u2212"}),(0,l.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(s.span,{className:"base",children:[(0,l.jsx)(s.span,{className:"strut",style:{height:"1.0044em",verticalAlign:"-0.31em"}}),(0,l.jsx)(s.span,{className:"mord text",children:(0,l.jsx)(s.span,{className:"mord",children:"protocol_fee"})})]})]})]})})]})}function h(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(m,{...e})}):m(e)}}}]);